# 장기요양 기록지/리포트 객체 관리 방식 비교

## 목적
사용자가 입력한 장기요양기록지를 바탕으로 이쁘게 가공된 리포트를 생성하고 전송하는 구조를 설계하고자 함. 이를 위한 객체 및 테이블 관리 전략을 3가지로 나눠 비교.

---

## 1. 하나의 테이블 + 코드 레벨 분리

### 구조
- `RecordReport` 단일 테이블
- 코드에서는 `RecordForm`, `Report`로 분리하여 사용
- 기록지 데이터는 매일 06시에 초기화

### 장점
- ✅ 테이블 수가 적어 관리가 단순함
- ✅ 공통 필드(id, 사용자 ID, 날짜 등) 중복 없음
- ✅ 조인 없이 조회 가능

### 단점
- ❌ 데이터 의미가 불명확해질 수 있음
- ❌ 스키마 확장이 어려움 (불필요한 null 필드 증가)
- ❌ 코드 복잡도 증가 (항상 분기처리 필요)

### 적합한 경우
- 구조가 거의 동일하고 생명주기가 함께인 경우
- 빠른 구현이 필요한 MVP 단계

---

## 2. 두 개의 테이블로 분리

### 구조
- `record_forms` (사용자 입력 기록지)
- `reports` (가공된 리포트)
- 기록지는 매일 06시에 초기화, 리포트는 생성 시점에만 insert

### 장점
- ✅ 역할과 의미가 명확하게 분리됨
- ✅ 리포트 확장이나 구조 변경 시 기록지에 영향 없음
- ✅ 유지보수가 쉬움

### 단점
- ❌ centerId, 날짜 등 공통 필드가 중복될 수 있음
- ❌ 복합 조회 시 JOIN 필요
- ❌ 동기화 로직 필요 (예: 같은 날짜 데이터 있는지 확인)

### 적합한 경우
- 기록지와 리포트의 성격이 뚜렷하게 다를 경우
- 서비스가 중장기적으로 확장될 가능성이 있는 경우

---

## 3. 부모 테이블 + 자식 테이블 (상속 구조)

### 구조
- `record_items` (공통 필드 관리용 부모 테이블)
- `record_forms`, `reports` (자식 테이블)
- 부모 테이블에 매일 06시에 초기 레코드 삽입

### 장점
- ✅ 공통 필드 일관성 유지 용이
- ✅ 다양한 유형의 레코드 추가 가능 (확장성 높음)
- ✅ 구조적으로 의미가 명확 (공통 상위 개념 존재)

### 단점
- ❌ 설계 및 쿼리 복잡도 증가
- ❌ ORM 사용 시 상속 전략에 따른 고려 필요
- ❌ 작은 프로젝트에는 과한 구조일 수 있음

### 적합한 경우
- 기록지와 리포트가 같은 흐름에서 파생된 유형일 때
- 향후 다른 유형의 레코드(예: 통계, 분석 로그 등)가 추가될 가능성이 있을 때

---

## 결론
부모 테이블 + 자식 테이블
- 기록지와 리포트는 동일한 흐름에서 파생되지만, 사용 목적과 갱신 주기가 명확히 다르며, 향후 통계·분석·통합 리포트 등의 확장 가능성도 고려해야 한다.
- 따라서 공통 필드는 부모 테이블(record_items)로 분리하고, 기록지(record_forms)와 리포트(reports)는 자식 테이블로 관리하는 상속 구조가 가장 적합하다.